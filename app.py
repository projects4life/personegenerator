from flask import Flask
import requests
from bs4 import BeautifulSoup

app = Flask(__name__)


# Index page
@app.route('/', methods=['GET'])
def index():
    return 'soon be implemented'


def get_random_image():
    """
    Gets a random image of a person generated by the website https://this-person-does-not-exist.com/en,
    saves it to a file named "random-face.jpg" in a directory called "images/", and returns nothing.

    This function sends a GET request to the website to get the URL of a randomly generated image of a person,
    parses the response using BeautifulSoup to find the image URL, sends a second GET request to get the image data,
    and saves the image data to a file named "random-face.jpg" in a directory called "images/".

    Args:
        None.

    Returns:
        None.
    """
    # Sending a request
    url = "https://this-person-does-not-exist.com/en"
    response = requests.get(url)
    # parsing the response 
    soup = BeautifulSoup(response.text, "html.parser")
    img = soup.find("img", {"id": "avatar"})
    random_image_url=f"https://this-person-does-not-exist.com{img['src']}"
    # saving it into a file
    image = requests.get(random_image_url)
    filename = "images/random-face.jpg"
    with open(filename, "wb") as file:
        file.write(image.content)
    return "image has been created"

def get_image_info_from_aws():
    return "soon implemented"

def send_info_to_chat_gpt():
    return "soon implemented"

def render_result():
    return "soon implemented" 



if __name__ == '__main__':
    get_random_image()
    app.run(host='0.0.0.0',debug=True)
